<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags always come first -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">   
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/5.1.1/bootstrap-social.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster|Open+Sans">

        <!-- Additional CSS must be placed after Bootstrap CSS -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster|Open+Sans">
        <link rel="stylesheet" href="css/styles.css"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <style>
            body { margin: 0; padding: 0; }
            #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        </style>
        <title>About Us</title>  
    </head>
    <body class="">
        
       <ul id="z-info">
        
       </ul>
       <div class="festival-info">
            
       </div>
       
    </body>
        <script>
            var $data = $('#z-info');
            $(function(){
                $.ajax({
                    url: 'js/events.json',
                    dataType: 'json', 
                    type: 'GET',
                    cache: false,
                    success: function(data) {
                        $(data.events.festivals).each(function (index, value) {
                            $.ajax({
                            type: 'GET',
                            url: 'https://api.songkick.com/api/3.0/events/' + value.id +'.json?apikey=BcSVaxyGOG1IVR63',
                            dataType: 'JSON',
                            success: function(data) {
                            //console.log('success', data);
                            //console.log(data.resultsPage.results.event.displayName);
                                    var htmlString = [];
                                    $.each(data, function(i, item) {
                                        htmlString += '<div class="card mb-4 p-3" style="width: 100%;">'
                                        htmlString += '<img class="card-img-top" src="" alt="">'
                                        htmlString += '<div class="card-body">'
                                        htmlString += '<h5 class="card-title display-4">' + data.resultsPage.results.event.displayName  + '</h5>'
                                        htmlString += '<div id="map"></div>'
                                        htmlString += '<p class="card-text">' + data.resultsPage.results.event.start.date + ' to ' + data.resultsPage.results.event.end.date + '</p></div>'
                                        htmlString += '<ul class="list-group list-group-flush">'
                                        htmlString += '<li class="list-group-item bg-transparent">' + 'Location:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + data.resultsPage.results.event.location.city + '</li>'
                                        htmlString += '<li class="list-group-item bg-transparent">' + 'Popularity:&nbsp;&nbsp;&nbsp;' + data.resultsPage.results.event.popularity + '</li>'
                                        htmlString += '<li class="list-group-item bg-transparent">' + 'More Info:&nbsp;&nbsp;' + '<a href="' + data.resultsPage.results.event.start.date + '" class="card-link">Songkick Page</a>' + '</li>'
                                        htmlString += '</ul>'
                                        htmlString += '<div class="card-body">'
                                        htmlString += '<h4>Headliners</h4>'
                                        htmlString += '</div>'
                                        htmlString += '</div>'
                                
                                    $data.append(htmlString);
                                        //'<li>' + data.resultsPage.results.event.displayName +'</li>'
                            });
                    }
                });          
                        });
                    }
                });
            });
        </script>
        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoiYWRyaWFuMjc1IiwiYSI6ImNpdm8yY3E1azAwdXQyb24yZmxsbHl1aDIifQ.USDLj5nTUv9bEr6YpkObBw';
        var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [-74.5, 40],
        zoom: 9,
        // causes pan & zoom handlers not to be applied, similar to
        // .dragging.disable() and other handler .disable() funtions in Leaflet.
        interactive: false
        });
        </script>        
    <footer>
    </footer>
</html>